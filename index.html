<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Advanced Yearly Calendar Builder</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter&family=Poppins&family=Montserrat&display=swap" rel="stylesheet">

  <!-- Canvas2Image for JPEG download -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <style>
    :root {
      --primary: #6366f1;
      --secondary: #ec4899;
      --bg: #f8fafc;
      --card: #ffffff;
      --holiday: #ef4444;
    }

    body {
      margin: 0;
      font-family: Inter, sans-serif;
      background: linear-gradient(135deg, #eef2ff, #fdf2f8);
      color: #1f2937;
    }

    header { padding: 20px; background: white; box-shadow: 0 4px 10px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 10; }
    header h1 { margin: 0 0 10px; }

    .controls { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; }
    select, input, button { padding: 8px 10px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 14px; }
    button { background: var(--primary); color: white; cursor: pointer; border: none; }
    button.secondary { background: var(--secondary); }

    #previewWrapper { padding: 30px; }
    #calendar { background: var(--card); padding: 20px; border-radius: 16px; max-width: 1200px; margin: auto; }
    .company-name { text-align: center; font-size: 28px; font-weight: bold; margin-bottom: 10px; }

    .layout { display: grid; gap: 20px; }
    .layout.top-image { grid-template-rows: auto 1fr; }
    .layout.left-image { grid-template-columns: 1fr 2fr; }
    .layout.right-image { grid-template-columns: 2fr 1fr; }
    .layout.bottom-image { grid-template-rows: 1fr auto; }

    .header-image img { width: 100%; border-radius: 12px; object-fit: cover; }
    .months { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px; }
    .month { border: 1px solid #e5e7eb; border-radius: 12px; padding: 10px; }
    .month h3 { text-align: center; margin: 5px 0 10px; color: var(--primary); }
    .days { display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; font-size: 12px; text-align: center; }
    .day { padding: 6px 0; border-radius: 6px; }
    .holiday { background: var(--holiday); color: white; }
  </style>
</head>
<body>

<header>
  <h1>Yearly Calendar Builder</h1>
  <div class="controls">
    <input type="text" id="companyInput" placeholder="Company / Name" />
    <select id="fontSelect">
      <option value="Inter">Inter</option>
      <option value="Poppins">Poppins</option>
      <option value="Montserrat">Montserrat</option>
    </select>
    <select id="layoutSelect">
      <option value="top-image">Image Top</option>
      <option value="left-image">Image Left</option>
      <option value="right-image">Image Right</option>
      <option value="bottom-image">Image Bottom</option>
    </select>
    <input type="range" id="imageSize" min="150" max="500" value="250" />
    <input type="file" id="imageUpload" accept="image/*" />
    <button onclick="downloadJPEG()">Download as JPEG</button>
    <button class="secondary" onclick="generateCalendar()">Generate Calendar</button>
  </div>
</header>

<div id="previewWrapper">
  <div id="calendar">
    <div class="company-name" id="companyName">Your Company</div>
    <div class="layout top-image" id="layout">
      <div class="header-image"><img id="headerImg" src="https://via.placeholder.com/1200x300" /></div>
      <div class="months" id="months"></div>
    </div>
  </div>
</div>

<script>
  const holidays = {"01-01": true,"02-04": true,"05-01": true,"12-25": true};
  const monthsEl = document.getElementById('months');
  const headerImg = document.getElementById('headerImg');
  const imageSize = document.getElementById('imageSize');
  const layout = document.getElementById('layout');

  function buildCalendar(year = new Date().getFullYear()) {
    monthsEl.innerHTML = '';
    for (let m = 0; m < 12; m++) {
      const date = new Date(year, m, 1);
      const month = document.createElement('div');
      month.className = 'month';
      month.innerHTML = `<h3>${date.toLocaleString('default', { month: 'long' })}</h3>`;
      const days = document.createElement('div');
      days.className = 'days';
      const daysInMonth = new Date(year, m + 1, 0).getDate();
      for (let d = 1; d <= daysInMonth; d++) {
        const key = `${String(m+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
        const day = document.createElement('div');
        day.className = 'day' + (holidays[key] ? ' holiday' : '');
        day.textContent = d;
        days.appendChild(day);
      }
      month.appendChild(days);
      monthsEl.appendChild(month);
    }
  }

  document.getElementById('companyInput').addEventListener('input', e => {
    document.getElementById('companyName').textContent = e.target.value || 'Your Company';
  });
  document.getElementById('fontSelect').addEventListener('change', e => {
    document.body.style.fontFamily = e.target.value;
  });
  document.getElementById('layoutSelect').addEventListener('change', e => {
    layout.className = 'layout ' + e.target.value;
  });
  imageSize.addEventListener('input', e => {
    headerImg.style.height = e.target.value + 'px';
  });
  document.getElementById('imageUpload').addEventListener('change', e => {
    const file = e.target.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = () => headerImg.src = reader.result;
    reader.readAsDataURL(file);
  });

  function generateCalendar() {
    buildCalendar();
  }

  function downloadJPEG() {
    html2canvas(document.getElementById('calendar')).then(canvas => {
      canvas.toBlob(function(blob) {
        const link = document.createElement('a');
        link.download = 'calendar.jpg';
        link.href = URL.createObjectURL(blob);
        link.click();
      });
    });
  }

  buildCalendar();
</script>

</body>
</html>